#!/bin/bash

echo 'ğŸ§ª Testing deployment workflow...'

echo 'ğŸ“¦ Step 1: Checking executable permissions'
if [[ -x ./DEPLOY && -x ./BANG && -x ./BUILD ]]; then
  echo 'âœ… All scripts are executable'
else 
  echo 'âŒ Some scripts are not executable'
  exit 1
fi

echo 'ğŸ“‹ Step 2: Checking for required files'
REQUIRED_FILES=('main.py' 'requirements.txt' 'rust_modules/price_calculator/Cargo.toml' 'app/core/config.py')
for file in "${REQUIRED_FILES[@]}"; do
  if [[ -f $file ]]; then
    echo "âœ… Found: $file"
  else
    echo "âŒ Missing: $file"
    exit 1
  fi
done

echo 'ğŸ Step 3: Checking Python version'
if command -v python3 &> /dev/null; then
  PYTHON_VERSION=$(python3 --version | cut -d" " -f2 | cut -d"." -f1,2)
  echo "âœ… Python version: $PYTHON_VERSION"
else
  echo 'âŒ Python3 not found'
  exit 1
fi

echo 'ğŸ‰ All checks passed! Ready for deployment.'
echo ''
echo 'ğŸ“– Next steps:'
echo '   1. Run ./DEPLOY to set up the environment'
echo '   2. Edit .env file with your configuration'
echo '   3. Run ./BANG to start the application'

